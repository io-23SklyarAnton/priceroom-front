{"version":3,"names":["_slicedToArray","r","e","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","length","n","l","Symbol","iterator","i","u","f","o","next","Object","done","push","value","isArray","defineProperty","exports","getSuggestedQuery","_domAccessibilityApi","require","_matches","_getNodeText","_config","_roleHelpers","_labelHelpers","normalize","getDefaultNormalizer","escapeRegExp","string","replace","getRegExpMatcher","RegExp","toLowerCase","makeSuggestion","queryName","element","content","_ref","variant","warning","queryOptions","queryArgs","includes","isInaccessible","hidden","keys","queryMethod","concat","console","warn","text","options","entries","map","_ref2","_ref3","k","v","join","canSuggest","currentMethod","requestedMethod","data","_element$getAttribute","_ref4","arguments","undefined","method","matches","getConfig","defaultIgnore","role","getAttribute","getImplicitAriaRoles","computeAccessibleName","computedStyleSupportsPseudoElements","labelText","getLabels","document","label","placeholderText","textContent","getNodeText","alt","title","testId","testIdAttribute"],"sources":["suggestions.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSuggestedQuery = getSuggestedQuery;\nvar _domAccessibilityApi = require(\"dom-accessibility-api\");\nvar _matches = require(\"./matches\");\nvar _getNodeText = require(\"./get-node-text\");\nvar _config = require(\"./config\");\nvar _roleHelpers = require(\"./role-helpers\");\nvar _labelHelpers = require(\"./label-helpers\");\nconst normalize = (0, _matches.getDefaultNormalizer)();\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\nfunction getRegExpMatcher(string) {\n  return new RegExp(escapeRegExp(string.toLowerCase()), 'i');\n}\nfunction makeSuggestion(queryName, element, content, {\n  variant,\n  name\n}) {\n  let warning = '';\n  const queryOptions = {};\n  const queryArgs = [['Role', 'TestId'].includes(queryName) ? content : getRegExpMatcher(content)];\n  if (name) {\n    queryOptions.name = getRegExpMatcher(name);\n  }\n  if (queryName === 'Role' && (0, _roleHelpers.isInaccessible)(element)) {\n    queryOptions.hidden = true;\n    warning = `Element is inaccessible. This means that the element and all its children are invisible to screen readers.\n    If you are using the aria-hidden prop, make sure this is the right choice for your case.\n    `;\n  }\n  if (Object.keys(queryOptions).length > 0) {\n    queryArgs.push(queryOptions);\n  }\n  const queryMethod = `${variant}By${queryName}`;\n  return {\n    queryName,\n    queryMethod,\n    queryArgs,\n    variant,\n    warning,\n    toString() {\n      if (warning) {\n        console.warn(warning);\n      }\n      let [text, options] = queryArgs;\n      text = typeof text === 'string' ? `'${text}'` : text;\n      options = options ? `, { ${Object.entries(options).map(([k, v]) => `${k}: ${v}`).join(', ')} }` : '';\n      return `${queryMethod}(${text}${options})`;\n    }\n  };\n}\nfunction canSuggest(currentMethod, requestedMethod, data) {\n  return data && (!requestedMethod || requestedMethod.toLowerCase() === currentMethod.toLowerCase());\n}\nfunction getSuggestedQuery(element, variant = 'get', method) {\n  // don't create suggestions for script and style elements\n  if (element.matches((0, _config.getConfig)().defaultIgnore)) {\n    return undefined;\n  }\n\n  //We prefer to suggest something else if the role is generic\n  const role = element.getAttribute('role') ?? (0, _roleHelpers.getImplicitAriaRoles)(element)?.[0];\n  if (role !== 'generic' && canSuggest('Role', method, role)) {\n    return makeSuggestion('Role', element, role, {\n      variant,\n      name: (0, _domAccessibilityApi.computeAccessibleName)(element, {\n        computedStyleSupportsPseudoElements: (0, _config.getConfig)().computedStyleSupportsPseudoElements\n      })\n    });\n  }\n  const labelText = (0, _labelHelpers.getLabels)(document, element).map(label => label.content).join(' ');\n  if (canSuggest('LabelText', method, labelText)) {\n    return makeSuggestion('LabelText', element, labelText, {\n      variant\n    });\n  }\n  const placeholderText = element.getAttribute('placeholder');\n  if (canSuggest('PlaceholderText', method, placeholderText)) {\n    return makeSuggestion('PlaceholderText', element, placeholderText, {\n      variant\n    });\n  }\n  const textContent = normalize((0, _getNodeText.getNodeText)(element));\n  if (canSuggest('Text', method, textContent)) {\n    return makeSuggestion('Text', element, textContent, {\n      variant\n    });\n  }\n  if (canSuggest('DisplayValue', method, element.value)) {\n    return makeSuggestion('DisplayValue', element, normalize(element.value), {\n      variant\n    });\n  }\n  const alt = element.getAttribute('alt');\n  if (canSuggest('AltText', method, alt)) {\n    return makeSuggestion('AltText', element, alt, {\n      variant\n    });\n  }\n  const title = element.getAttribute('title');\n  if (canSuggest('Title', method, title)) {\n    return makeSuggestion('Title', element, title, {\n      variant\n    });\n  }\n  const testId = element.getAttribute((0, _config.getConfig)().testIdAttribute);\n  if (canSuggest('TestId', method, testId)) {\n    return makeSuggestion('TestId', element, testId, {\n      variant\n    });\n  }\n  return undefined;\n}"],"mappings":"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","ignoreList":[]}