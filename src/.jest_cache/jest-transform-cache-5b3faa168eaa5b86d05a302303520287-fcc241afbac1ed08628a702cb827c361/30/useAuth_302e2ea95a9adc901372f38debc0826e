b61df2557f250ca26067256396c09793
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _react = require("react");
var _reactRouterDom = require("react-router-dom");
var _jwtDecode = require("jwt-decode");
var useAuth = function useAuth() {
  var navigate = (0, _reactRouterDom.useNavigate)();
  (0, _react.useEffect)(function () {
    var token = localStorage.getItem("token");
    if (!token) {
      navigate("/auth");
      return;
    }
    try {
      var decodedToken = (0, _jwtDecode.jwtDecode)(token);
      if (decodedToken.exp * 1000 < Date.now()) {
        localStorage.removeItem("token");
        navigate("/auth");
      }
    } catch (error) {
      console.error("Invalid token:", error);
      localStorage.removeItem("token");
      navigate("/auth");
    }
  }, [navigate]);
};
var _default = exports["default"] = useAuth;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3JlYWN0Um91dGVyRG9tIiwiX2p3dERlY29kZSIsInVzZUF1dGgiLCJuYXZpZ2F0ZSIsInVzZU5hdmlnYXRlIiwidXNlRWZmZWN0IiwidG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZGVjb2RlZFRva2VuIiwiand0RGVjb2RlIiwiZXhwIiwiRGF0ZSIsIm5vdyIsInJlbW92ZUl0ZW0iLCJlcnJvciIsImNvbnNvbGUiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ1c2VBdXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlTmF2aWdhdGUgfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IHsgand0RGVjb2RlIH0gZnJvbSBcImp3dC1kZWNvZGVcIjtcblxuY29uc3QgdXNlQXV0aCA9ICgpID0+IHtcbiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRva2VuXCIpO1xuXG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgbmF2aWdhdGUoXCIvYXV0aFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGVjb2RlZFRva2VuID0gand0RGVjb2RlKHRva2VuKTtcblxuICAgICAgaWYgKGRlY29kZWRUb2tlbi5leHAgKiAxMDAwIDwgRGF0ZS5ub3coKSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcInRva2VuXCIpO1xuICAgICAgICBuYXZpZ2F0ZShcIi9hdXRoXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCB0b2tlbjpcIiwgZXJyb3IpO1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJ0b2tlblwiKTtcbiAgICAgIG5hdmlnYXRlKFwiL2F1dGhcIik7XG4gICAgfVxuICB9LCBbbmF2aWdhdGVdKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZUF1dGg7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGVBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFVBQUEsR0FBQUYsT0FBQTtBQUVBLElBQU1HLE9BQU8sR0FBRyxTQUFWQSxPQUFPQSxDQUFBLEVBQVM7RUFDcEIsSUFBTUMsUUFBUSxHQUFHLElBQUFDLDJCQUFXLEVBQUMsQ0FBQztFQUU5QixJQUFBQyxnQkFBUyxFQUFDLFlBQU07SUFDZCxJQUFNQyxLQUFLLEdBQUdDLFlBQVksQ0FBQ0MsT0FBTyxDQUFDLE9BQU8sQ0FBQztJQUUzQyxJQUFJLENBQUNGLEtBQUssRUFBRTtNQUNWSCxRQUFRLENBQUMsT0FBTyxDQUFDO01BQ2pCO0lBQ0Y7SUFFQSxJQUFJO01BQ0YsSUFBTU0sWUFBWSxHQUFHLElBQUFDLG9CQUFTLEVBQUNKLEtBQUssQ0FBQztNQUVyQyxJQUFJRyxZQUFZLENBQUNFLEdBQUcsR0FBRyxJQUFJLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRTtRQUN4Q04sWUFBWSxDQUFDTyxVQUFVLENBQUMsT0FBTyxDQUFDO1FBQ2hDWCxRQUFRLENBQUMsT0FBTyxDQUFDO01BQ25CO0lBQ0YsQ0FBQyxDQUFDLE9BQU9ZLEtBQUssRUFBRTtNQUNkQyxPQUFPLENBQUNELEtBQUssQ0FBQyxnQkFBZ0IsRUFBRUEsS0FBSyxDQUFDO01BQ3RDUixZQUFZLENBQUNPLFVBQVUsQ0FBQyxPQUFPLENBQUM7TUFDaENYLFFBQVEsQ0FBQyxPQUFPLENBQUM7SUFDbkI7RUFDRixDQUFDLEVBQUUsQ0FBQ0EsUUFBUSxDQUFDLENBQUM7QUFDaEIsQ0FBQztBQUFDLElBQUFjLFFBQUEsR0FBQUMsT0FBQSxjQUVhaEIsT0FBTyIsImlnbm9yZUxpc3QiOltdfQ==