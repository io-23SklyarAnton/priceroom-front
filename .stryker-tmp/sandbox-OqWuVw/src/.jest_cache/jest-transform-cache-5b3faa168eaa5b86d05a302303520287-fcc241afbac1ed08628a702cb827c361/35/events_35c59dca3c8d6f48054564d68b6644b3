ce020be817065f2e64050865cee817b3
"use strict";

var _excluded = ["value", "files"],
  _excluded2 = ["bubbles", "cancelable", "detail"];
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }
function _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createEvent = createEvent;
exports.fireEvent = fireEvent;
var _config = require("./config");
var _helpers = require("./helpers");
var _eventMap = require("./event-map");
function fireEvent(element, event) {
  return (0, _config.getConfig)().eventWrapper(function () {
    if (!event) {
      throw new Error("Unable to fire an event - please provide an event object.");
    }
    if (!element) {
      throw new Error("Unable to fire a \"".concat(event.type, "\" event - please provide a DOM element."));
    }
    return element.dispatchEvent(event);
  });
}
function createEvent(eventName, node, init) {
  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},
    _ref$EventType = _ref.EventType,
    EventType = _ref$EventType === void 0 ? 'Event' : _ref$EventType,
    _ref$defaultInit = _ref.defaultInit,
    defaultInit = _ref$defaultInit === void 0 ? {} : _ref$defaultInit;
  if (!node) {
    throw new Error("Unable to fire a \"".concat(eventName, "\" event - please provide a DOM element."));
  }
  var eventInit = _objectSpread(_objectSpread({}, defaultInit), init);
  var _eventInit$target = eventInit.target,
    _eventInit$target2 = _eventInit$target === void 0 ? {} : _eventInit$target,
    value = _eventInit$target2.value,
    files = _eventInit$target2.files,
    targetProperties = _objectWithoutProperties(_eventInit$target2, _excluded);
  if (value !== undefined) {
    setNativeValue(node, value);
  }
  if (files !== undefined) {
    // input.files is a read-only property so this is not allowed:
    // input.files = [file]
    // so we have to use this workaround to set the property
    Object.defineProperty(node, 'files', {
      configurable: true,
      enumerable: true,
      writable: true,
      value: files
    });
  }
  Object.assign(node, targetProperties);
  var window = (0, _helpers.getWindowFromNode)(node);
  var EventConstructor = window[EventType] || window.Event;
  var event;
  /* istanbul ignore else  */
  if (typeof EventConstructor === 'function') {
    event = new EventConstructor(eventName, eventInit);
  } else {
    // IE11 polyfill from https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill
    event = window.document.createEvent(EventType);
    var bubbles = eventInit.bubbles,
      cancelable = eventInit.cancelable,
      detail = eventInit.detail,
      otherInit = _objectWithoutProperties(eventInit, _excluded2);
    event.initEvent(eventName, bubbles, cancelable, detail);
    Object.keys(otherInit).forEach(function (eventKey) {
      event[eventKey] = otherInit[eventKey];
    });
  }

  // DataTransfer is not supported in jsdom: https://github.com/jsdom/jsdom/issues/1568
  var dataTransferProperties = ['dataTransfer', 'clipboardData'];
  dataTransferProperties.forEach(function (dataTransferKey) {
    var dataTransferValue = eventInit[dataTransferKey];
    if (_typeof(dataTransferValue) === 'object') {
      /* istanbul ignore if  */
      if (typeof window.DataTransfer === 'function') {
        Object.defineProperty(event, dataTransferKey, {
          value: Object.getOwnPropertyNames(dataTransferValue).reduce(function (acc, propName) {
            Object.defineProperty(acc, propName, {
              value: dataTransferValue[propName]
            });
            return acc;
          }, new window.DataTransfer())
        });
      } else {
        Object.defineProperty(event, dataTransferKey, {
          value: dataTransferValue
        });
      }
    }
  });
  return event;
}
Object.keys(_eventMap.eventMap).forEach(function (key) {
  var _eventMap$eventMap$ke = _eventMap.eventMap[key],
    EventType = _eventMap$eventMap$ke.EventType,
    defaultInit = _eventMap$eventMap$ke.defaultInit;
  var eventName = key.toLowerCase();
  createEvent[key] = function (node, init) {
    return createEvent(eventName, node, init, {
      EventType: EventType,
      defaultInit: defaultInit
    });
  };
  fireEvent[key] = function (node, init) {
    return fireEvent(node, createEvent[key](node, init));
  };
});

// function written after some investigation here:
// https://github.com/facebook/react/issues/10135#issuecomment-401496776
function setNativeValue(element, value) {
  var _ref2 = Object.getOwnPropertyDescriptor(element, 'value') || {},
    valueSetter = _ref2.set;
  var prototype = Object.getPrototypeOf(element);
  var _ref3 = Object.getOwnPropertyDescriptor(prototype, 'value') || {},
    prototypeValueSetter = _ref3.set;
  if (prototypeValueSetter && valueSetter !== prototypeValueSetter) {
    prototypeValueSetter.call(element, value);
  } else {
    /* istanbul ignore if */
    // eslint-disable-next-line no-lonely-if -- Can't be ignored by istanbul otherwise
    if (valueSetter) {
      valueSetter.call(element, value);
    } else {
      throw new Error('The given element does not have a value setter');
    }
  }
}
Object.keys(_eventMap.eventAliasMap).forEach(function (aliasKey) {
  var key = _eventMap.eventAliasMap[aliasKey];
  fireEvent[aliasKey] = function () {
    return fireEvent[key].apply(fireEvent, arguments);
  };
});

/* eslint complexity:["error", 9] */
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhjbHVkZWQiLCJfZXhjbHVkZWQyIiwiX3R5cGVvZiIsIm8iLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwiZSIsInQiLCJyIiwiaSIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwicyIsImxlbmd0aCIsImluY2x1ZGVzIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJjYWxsIiwibiIsImhhc093blByb3BlcnR5Iiwib3duS2V5cyIsImtleXMiLCJmaWx0ZXIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlZmluZVByb3BlcnR5IiwiX3RvUHJvcGVydHlLZXkiLCJ2YWx1ZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX3RvUHJpbWl0aXZlIiwidG9QcmltaXRpdmUiLCJUeXBlRXJyb3IiLCJTdHJpbmciLCJOdW1iZXIiLCJleHBvcnRzIiwiY3JlYXRlRXZlbnQiLCJmaXJlRXZlbnQiLCJfY29uZmlnIiwicmVxdWlyZSIsIl9oZWxwZXJzIiwiX2V2ZW50TWFwIiwiZWxlbWVudCIsImV2ZW50IiwiZ2V0Q29uZmlnIiwiZXZlbnRXcmFwcGVyIiwiRXJyb3IiLCJjb25jYXQiLCJ0eXBlIiwiZGlzcGF0Y2hFdmVudCIsImV2ZW50TmFtZSIsIm5vZGUiLCJpbml0IiwiX3JlZiIsInVuZGVmaW5lZCIsIl9yZWYkRXZlbnRUeXBlIiwiRXZlbnRUeXBlIiwiX3JlZiRkZWZhdWx0SW5pdCIsImRlZmF1bHRJbml0IiwiZXZlbnRJbml0IiwiX2V2ZW50SW5pdCR0YXJnZXQiLCJ0YXJnZXQiLCJfZXZlbnRJbml0JHRhcmdldDIiLCJmaWxlcyIsInRhcmdldFByb3BlcnRpZXMiLCJzZXROYXRpdmVWYWx1ZSIsImFzc2lnbiIsIndpbmRvdyIsImdldFdpbmRvd0Zyb21Ob2RlIiwiRXZlbnRDb25zdHJ1Y3RvciIsIkV2ZW50IiwiZG9jdW1lbnQiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImRldGFpbCIsIm90aGVySW5pdCIsImluaXRFdmVudCIsImV2ZW50S2V5IiwiZGF0YVRyYW5zZmVyUHJvcGVydGllcyIsImRhdGFUcmFuc2ZlcktleSIsImRhdGFUcmFuc2ZlclZhbHVlIiwiRGF0YVRyYW5zZmVyIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsInJlZHVjZSIsImFjYyIsInByb3BOYW1lIiwiZXZlbnRNYXAiLCJrZXkiLCJfZXZlbnRNYXAkZXZlbnRNYXAka2UiLCJ0b0xvd2VyQ2FzZSIsIl9yZWYyIiwidmFsdWVTZXR0ZXIiLCJzZXQiLCJnZXRQcm90b3R5cGVPZiIsIl9yZWYzIiwicHJvdG90eXBlVmFsdWVTZXR0ZXIiLCJldmVudEFsaWFzTWFwIiwiYWxpYXNLZXkiXSwic291cmNlcyI6WyJldmVudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmNyZWF0ZUV2ZW50ID0gY3JlYXRlRXZlbnQ7XG5leHBvcnRzLmZpcmVFdmVudCA9IGZpcmVFdmVudDtcbnZhciBfY29uZmlnID0gcmVxdWlyZShcIi4vY29uZmlnXCIpO1xudmFyIF9oZWxwZXJzID0gcmVxdWlyZShcIi4vaGVscGVyc1wiKTtcbnZhciBfZXZlbnRNYXAgPSByZXF1aXJlKFwiLi9ldmVudC1tYXBcIik7XG5mdW5jdGlvbiBmaXJlRXZlbnQoZWxlbWVudCwgZXZlbnQpIHtcbiAgcmV0dXJuICgwLCBfY29uZmlnLmdldENvbmZpZykoKS5ldmVudFdyYXBwZXIoKCkgPT4ge1xuICAgIGlmICghZXZlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGZpcmUgYW4gZXZlbnQgLSBwbGVhc2UgcHJvdmlkZSBhbiBldmVudCBvYmplY3QuYCk7XG4gICAgfVxuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gZmlyZSBhIFwiJHtldmVudC50eXBlfVwiIGV2ZW50IC0gcGxlYXNlIHByb3ZpZGUgYSBET00gZWxlbWVudC5gKTtcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlRXZlbnQoZXZlbnROYW1lLCBub2RlLCBpbml0LCB7XG4gIEV2ZW50VHlwZSA9ICdFdmVudCcsXG4gIGRlZmF1bHRJbml0ID0ge31cbn0gPSB7fSkge1xuICBpZiAoIW5vZGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBmaXJlIGEgXCIke2V2ZW50TmFtZX1cIiBldmVudCAtIHBsZWFzZSBwcm92aWRlIGEgRE9NIGVsZW1lbnQuYCk7XG4gIH1cbiAgY29uc3QgZXZlbnRJbml0ID0ge1xuICAgIC4uLmRlZmF1bHRJbml0LFxuICAgIC4uLmluaXRcbiAgfTtcbiAgY29uc3Qge1xuICAgIHRhcmdldDoge1xuICAgICAgdmFsdWUsXG4gICAgICBmaWxlcyxcbiAgICAgIC4uLnRhcmdldFByb3BlcnRpZXNcbiAgICB9ID0ge31cbiAgfSA9IGV2ZW50SW5pdDtcbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICBzZXROYXRpdmVWYWx1ZShub2RlLCB2YWx1ZSk7XG4gIH1cbiAgaWYgKGZpbGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAvLyBpbnB1dC5maWxlcyBpcyBhIHJlYWQtb25seSBwcm9wZXJ0eSBzbyB0aGlzIGlzIG5vdCBhbGxvd2VkOlxuICAgIC8vIGlucHV0LmZpbGVzID0gW2ZpbGVdXG4gICAgLy8gc28gd2UgaGF2ZSB0byB1c2UgdGhpcyB3b3JrYXJvdW5kIHRvIHNldCB0aGUgcHJvcGVydHlcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobm9kZSwgJ2ZpbGVzJywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGZpbGVzXG4gICAgfSk7XG4gIH1cbiAgT2JqZWN0LmFzc2lnbihub2RlLCB0YXJnZXRQcm9wZXJ0aWVzKTtcbiAgY29uc3Qgd2luZG93ID0gKDAsIF9oZWxwZXJzLmdldFdpbmRvd0Zyb21Ob2RlKShub2RlKTtcbiAgY29uc3QgRXZlbnRDb25zdHJ1Y3RvciA9IHdpbmRvd1tFdmVudFR5cGVdIHx8IHdpbmRvdy5FdmVudDtcbiAgbGV0IGV2ZW50O1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAgKi9cbiAgaWYgKHR5cGVvZiBFdmVudENvbnN0cnVjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZXZlbnQgPSBuZXcgRXZlbnRDb25zdHJ1Y3RvcihldmVudE5hbWUsIGV2ZW50SW5pdCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gSUUxMSBwb2x5ZmlsbCBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudC9DdXN0b21FdmVudCNQb2x5ZmlsbFxuICAgIGV2ZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KEV2ZW50VHlwZSk7XG4gICAgY29uc3Qge1xuICAgICAgYnViYmxlcyxcbiAgICAgIGNhbmNlbGFibGUsXG4gICAgICBkZXRhaWwsXG4gICAgICAuLi5vdGhlckluaXRcbiAgICB9ID0gZXZlbnRJbml0O1xuICAgIGV2ZW50LmluaXRFdmVudChldmVudE5hbWUsIGJ1YmJsZXMsIGNhbmNlbGFibGUsIGRldGFpbCk7XG4gICAgT2JqZWN0LmtleXMob3RoZXJJbml0KS5mb3JFYWNoKGV2ZW50S2V5ID0+IHtcbiAgICAgIGV2ZW50W2V2ZW50S2V5XSA9IG90aGVySW5pdFtldmVudEtleV07XG4gICAgfSk7XG4gIH1cblxuICAvLyBEYXRhVHJhbnNmZXIgaXMgbm90IHN1cHBvcnRlZCBpbiBqc2RvbTogaHR0cHM6Ly9naXRodWIuY29tL2pzZG9tL2pzZG9tL2lzc3Vlcy8xNTY4XG4gIGNvbnN0IGRhdGFUcmFuc2ZlclByb3BlcnRpZXMgPSBbJ2RhdGFUcmFuc2ZlcicsICdjbGlwYm9hcmREYXRhJ107XG4gIGRhdGFUcmFuc2ZlclByb3BlcnRpZXMuZm9yRWFjaChkYXRhVHJhbnNmZXJLZXkgPT4ge1xuICAgIGNvbnN0IGRhdGFUcmFuc2ZlclZhbHVlID0gZXZlbnRJbml0W2RhdGFUcmFuc2ZlcktleV07XG4gICAgaWYgKHR5cGVvZiBkYXRhVHJhbnNmZXJWYWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cbiAgICAgIGlmICh0eXBlb2Ygd2luZG93LkRhdGFUcmFuc2ZlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXZlbnQsIGRhdGFUcmFuc2ZlcktleSwge1xuICAgICAgICAgIHZhbHVlOiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhkYXRhVHJhbnNmZXJWYWx1ZSkucmVkdWNlKChhY2MsIHByb3BOYW1lKSA9PiB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYWNjLCBwcm9wTmFtZSwge1xuICAgICAgICAgICAgICB2YWx1ZTogZGF0YVRyYW5zZmVyVmFsdWVbcHJvcE5hbWVdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgfSwgbmV3IHdpbmRvdy5EYXRhVHJhbnNmZXIoKSlcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXZlbnQsIGRhdGFUcmFuc2ZlcktleSwge1xuICAgICAgICAgIHZhbHVlOiBkYXRhVHJhbnNmZXJWYWx1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gZXZlbnQ7XG59XG5PYmplY3Qua2V5cyhfZXZlbnRNYXAuZXZlbnRNYXApLmZvckVhY2goa2V5ID0+IHtcbiAgY29uc3Qge1xuICAgIEV2ZW50VHlwZSxcbiAgICBkZWZhdWx0SW5pdFxuICB9ID0gX2V2ZW50TWFwLmV2ZW50TWFwW2tleV07XG4gIGNvbnN0IGV2ZW50TmFtZSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICBjcmVhdGVFdmVudFtrZXldID0gKG5vZGUsIGluaXQpID0+IGNyZWF0ZUV2ZW50KGV2ZW50TmFtZSwgbm9kZSwgaW5pdCwge1xuICAgIEV2ZW50VHlwZSxcbiAgICBkZWZhdWx0SW5pdFxuICB9KTtcbiAgZmlyZUV2ZW50W2tleV0gPSAobm9kZSwgaW5pdCkgPT4gZmlyZUV2ZW50KG5vZGUsIGNyZWF0ZUV2ZW50W2tleV0obm9kZSwgaW5pdCkpO1xufSk7XG5cbi8vIGZ1bmN0aW9uIHdyaXR0ZW4gYWZ0ZXIgc29tZSBpbnZlc3RpZ2F0aW9uIGhlcmU6XG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzEwMTM1I2lzc3VlY29tbWVudC00MDE0OTY3NzZcbmZ1bmN0aW9uIHNldE5hdGl2ZVZhbHVlKGVsZW1lbnQsIHZhbHVlKSB7XG4gIGNvbnN0IHtcbiAgICBzZXQ6IHZhbHVlU2V0dGVyXG4gIH0gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGVsZW1lbnQsICd2YWx1ZScpIHx8IHt9O1xuICBjb25zdCBwcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZWxlbWVudCk7XG4gIGNvbnN0IHtcbiAgICBzZXQ6IHByb3RvdHlwZVZhbHVlU2V0dGVyXG4gIH0gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvdHlwZSwgJ3ZhbHVlJykgfHwge307XG4gIGlmIChwcm90b3R5cGVWYWx1ZVNldHRlciAmJiB2YWx1ZVNldHRlciAhPT0gcHJvdG90eXBlVmFsdWVTZXR0ZXIpIHtcbiAgICBwcm90b3R5cGVWYWx1ZVNldHRlci5jYWxsKGVsZW1lbnQsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbG9uZWx5LWlmIC0tIENhbid0IGJlIGlnbm9yZWQgYnkgaXN0YW5idWwgb3RoZXJ3aXNlXG4gICAgaWYgKHZhbHVlU2V0dGVyKSB7XG4gICAgICB2YWx1ZVNldHRlci5jYWxsKGVsZW1lbnQsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgZ2l2ZW4gZWxlbWVudCBkb2VzIG5vdCBoYXZlIGEgdmFsdWUgc2V0dGVyJyk7XG4gICAgfVxuICB9XG59XG5PYmplY3Qua2V5cyhfZXZlbnRNYXAuZXZlbnRBbGlhc01hcCkuZm9yRWFjaChhbGlhc0tleSA9PiB7XG4gIGNvbnN0IGtleSA9IF9ldmVudE1hcC5ldmVudEFsaWFzTWFwW2FsaWFzS2V5XTtcbiAgZmlyZUV2ZW50W2FsaWFzS2V5XSA9ICguLi5hcmdzKSA9PiBmaXJlRXZlbnRba2V5XSguLi5hcmdzKTtcbn0pO1xuXG4vKiBlc2xpbnQgY29tcGxleGl0eTpbXCJlcnJvclwiLCA5XSAqLyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFBQyxJQUFBQSxTQUFBO0VBQUFDLFVBQUE7QUFBQSxTQUFBQyxRQUFBQyxDQUFBLHNDQUFBRCxPQUFBLHdCQUFBRSxNQUFBLHVCQUFBQSxNQUFBLENBQUFDLFFBQUEsYUFBQUYsQ0FBQSxrQkFBQUEsQ0FBQSxnQkFBQUEsQ0FBQSxXQUFBQSxDQUFBLHlCQUFBQyxNQUFBLElBQUFELENBQUEsQ0FBQUcsV0FBQSxLQUFBRixNQUFBLElBQUFELENBQUEsS0FBQUMsTUFBQSxDQUFBRyxTQUFBLHFCQUFBSixDQUFBLEtBQUFE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