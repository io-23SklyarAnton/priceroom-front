133f51d694f35a0162ef621093ef91db
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
/**
 * Throttle decorator
 * @param {Function} fn
 * @param {Number} freq
 * @return {Function}
 */
function throttle(fn, freq) {
  var timestamp = 0;
  var threshold = 1000 / freq;
  var lastArgs;
  var timer;
  var invoke = function invoke(args) {
    var now = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Date.now();
    timestamp = now;
    lastArgs = null;
    if (timer) {
      clearTimeout(timer);
      timer = null;
    }
    fn.apply(null, args);
  };
  var throttled = function throttled() {
    var now = Date.now();
    var passed = now - timestamp;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    if (passed >= threshold) {
      invoke(args, now);
    } else {
      lastArgs = args;
      if (!timer) {
        timer = setTimeout(function () {
          timer = null;
          invoke(lastArgs);
        }, threshold - passed);
      }
    }
  };
  var flush = function flush() {
    return lastArgs && invoke(lastArgs);
  };
  return [throttled, flush];
}
var _default = exports["default"] = throttle;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0aHJvdHRsZSIsImZuIiwiZnJlcSIsInRpbWVzdGFtcCIsInRocmVzaG9sZCIsImxhc3RBcmdzIiwidGltZXIiLCJpbnZva2UiLCJhcmdzIiwibm93IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiRGF0ZSIsImNsZWFyVGltZW91dCIsImFwcGx5IiwidGhyb3R0bGVkIiwicGFzc2VkIiwiX2xlbiIsIkFycmF5IiwiX2tleSIsInNldFRpbWVvdXQiLCJmbHVzaCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInRocm90dGxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhyb3R0bGUgZGVjb3JhdG9yXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtOdW1iZXJ9IGZyZXFcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiB0aHJvdHRsZShmbiwgZnJlcSkge1xuICBsZXQgdGltZXN0YW1wID0gMDtcbiAgbGV0IHRocmVzaG9sZCA9IDEwMDAgLyBmcmVxO1xuICBsZXQgbGFzdEFyZ3M7XG4gIGxldCB0aW1lcjtcblxuICBjb25zdCBpbnZva2UgPSAoYXJncywgbm93ID0gRGF0ZS5ub3coKSkgPT4ge1xuICAgIHRpbWVzdGFtcCA9IG5vdztcbiAgICBsYXN0QXJncyA9IG51bGw7XG4gICAgaWYgKHRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgdGltZXIgPSBudWxsO1xuICAgIH1cbiAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgfVxuXG4gIGNvbnN0IHRocm90dGxlZCA9ICguLi5hcmdzKSA9PiB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBwYXNzZWQgPSBub3cgLSB0aW1lc3RhbXA7XG4gICAgaWYgKCBwYXNzZWQgPj0gdGhyZXNob2xkKSB7XG4gICAgICBpbnZva2UoYXJncywgbm93KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGFzdEFyZ3MgPSBhcmdzO1xuICAgICAgaWYgKCF0aW1lcikge1xuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgICAgICBpbnZva2UobGFzdEFyZ3MpXG4gICAgICAgIH0sIHRocmVzaG9sZCAtIHBhc3NlZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZmx1c2ggPSAoKSA9PiBsYXN0QXJncyAmJiBpbnZva2UobGFzdEFyZ3MpO1xuXG4gIHJldHVybiBbdGhyb3R0bGVkLCBmbHVzaF07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHRocm90dGxlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQSxRQUFRQSxDQUFDQyxFQUFFLEVBQUVDLElBQUksRUFBRTtFQUMxQixJQUFJQyxTQUFTLEdBQUcsQ0FBQztFQUNqQixJQUFJQyxTQUFTLEdBQUcsSUFBSSxHQUFHRixJQUFJO0VBQzNCLElBQUlHLFFBQVE7RUFDWixJQUFJQyxLQUFLO0VBRVQsSUFBTUMsTUFBTSxHQUFHLFNBQVRBLE1BQU1BLENBQUlDLElBQUksRUFBdUI7SUFBQSxJQUFyQkMsR0FBRyxHQUFBQyxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBR0csSUFBSSxDQUFDSixHQUFHLENBQUMsQ0FBQztJQUNwQ04sU0FBUyxHQUFHTSxHQUFHO0lBQ2ZKLFFBQVEsR0FBRyxJQUFJO0lBQ2YsSUFBSUMsS0FBSyxFQUFFO01BQ1RRLFlBQVksQ0FBQ1IsS0FBSyxDQUFDO01BQ25CQSxLQUFLLEdBQUcsSUFBSTtJQUNkO0lBQ0FMLEVBQUUsQ0FBQ2MsS0FBSyxDQUFDLElBQUksRUFBRVAsSUFBSSxDQUFDO0VBQ3RCLENBQUM7RUFFRCxJQUFNUSxTQUFTLEdBQUcsU0FBWkEsU0FBU0EsQ0FBQSxFQUFnQjtJQUM3QixJQUFNUCxHQUFHLEdBQUdJLElBQUksQ0FBQ0osR0FBRyxDQUFDLENBQUM7SUFDdEIsSUFBTVEsTUFBTSxHQUFHUixHQUFHLEdBQUdOLFNBQVM7SUFBQyxTQUFBZSxJQUFBLEdBQUFSLFNBQUEsQ0FBQUMsTUFBQSxFQUZYSCxJQUFJLE9BQUFXLEtBQUEsQ0FBQUQsSUFBQSxHQUFBRSxJQUFBLE1BQUFBLElBQUEsR0FBQUYsSUFBQSxFQUFBRSxJQUFBO01BQUpaLElBQUksQ0FBQVksSUFBQSxJQUFBVixTQUFBLENBQUFVLElBQUE7SUFBQTtJQUd4QixJQUFLSCxNQUFNLElBQUliLFNBQVMsRUFBRTtNQUN4QkcsTUFBTSxDQUFDQyxJQUFJLEVBQUVDLEdBQUcsQ0FBQztJQUNuQixDQUFDLE1BQU07TUFDTEosUUFBUSxHQUFHRyxJQUFJO01BQ2YsSUFBSSxDQUFDRixLQUFLLEVBQUU7UUFDVkEsS0FBSyxHQUFHZSxVQUFVLENBQUMsWUFBTTtVQUN2QmYsS0FBSyxHQUFHLElBQUk7VUFDWkMsTUFBTSxDQUFDRixRQUFRLENBQUM7UUFDbEIsQ0FBQyxFQUFFRCxTQUFTLEdBQUdhLE1BQU0sQ0FBQztNQUN4QjtJQUNGO0VBQ0YsQ0FBQztFQUVELElBQU1LLEtBQUssR0FBRyxTQUFSQSxLQUFLQSxDQUFBO0lBQUEsT0FBU2pCLFFBQVEsSUFBSUUsTUFBTSxDQUFDRixRQUFRLENBQUM7RUFBQTtFQUVoRCxPQUFPLENBQUNXLFNBQVMsRUFBRU0sS0FBSyxDQUFDO0FBQzNCO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLGNBRWN4QixRQUFRIiwiaWdub3JlTGlzdCI6W119