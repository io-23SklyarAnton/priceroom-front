{"version":3,"names":["Object","defineProperty","exports","value","_CanceledError","_interopRequireDefault","require","e","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","_classCallCheck","a","n","TypeError","_defineProperties","r","t","length","enumerable","configurable","writable","_toPropertyKey","key","_createClass","i","_toPrimitive","toPrimitive","call","String","Number","CancelToken","executor","resolvePromise","promise","Promise","promiseExecutor","resolve","token","then","cancel","_listeners","onfulfilled","_resolve","subscribe","reject","unsubscribe","message","config","request","reason","CanceledError","throwIfRequested","listener","push","index","indexOf","splice","toAbortSignal","_this","controller","AbortController","abort","err","signal","source","c","_default"],"sources":["CancelToken.js"],"sourcesContent":["'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n"],"mappings":"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","ignoreList":[]}