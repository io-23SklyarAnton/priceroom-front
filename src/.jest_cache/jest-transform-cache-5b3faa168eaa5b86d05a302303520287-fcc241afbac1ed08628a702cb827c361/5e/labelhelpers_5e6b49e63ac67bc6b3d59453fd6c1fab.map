{"version":3,"names":["Object","defineProperty","exports","value","getLabelContent","getLabels","getRealLabels","_helpers","require","labelledNodeNames","getTextContent","node","includes","nodeName","toLowerCase","nodeType","TEXT_NODE","textContent","Array","from","childNodes","map","childNode","join","element","tagName","labels","undefined","_element$labels","isLabelable","ownerDocument","querySelectorAll","filter","label","control","test","getAttribute","container","_ref","arguments","length","_ref$selector","selector","ariaLabelledBy","labelsId","split","labelId","labellingElement","querySelector","concat","content","formControl","textToMatch","formControlSelector","labelledFormControl","formControlElement","matches"],"sources":["label-helpers.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLabelContent = getLabelContent;\nexports.getLabels = getLabels;\nexports.getRealLabels = getRealLabels;\nvar _helpers = require(\"./helpers\");\nconst labelledNodeNames = ['button', 'meter', 'output', 'progress', 'select', 'textarea', 'input'];\nfunction getTextContent(node) {\n  if (labelledNodeNames.includes(node.nodeName.toLowerCase())) {\n    return '';\n  }\n  if (node.nodeType === _helpers.TEXT_NODE) return node.textContent;\n  return Array.from(node.childNodes).map(childNode => getTextContent(childNode)).join('');\n}\nfunction getLabelContent(element) {\n  let textContent;\n  if (element.tagName.toLowerCase() === 'label') {\n    textContent = getTextContent(element);\n  } else {\n    textContent = element.value || element.textContent;\n  }\n  return textContent;\n}\n\n// Based on https://github.com/eps1lon/dom-accessibility-api/pull/352\nfunction getRealLabels(element) {\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- types are not aware of older browsers that don't implement `labels`\n  if (element.labels !== undefined) {\n    return element.labels ?? [];\n  }\n  if (!isLabelable(element)) return [];\n  const labels = element.ownerDocument.querySelectorAll('label');\n  return Array.from(labels).filter(label => label.control === element);\n}\nfunction isLabelable(element) {\n  return /BUTTON|METER|OUTPUT|PROGRESS|SELECT|TEXTAREA/.test(element.tagName) || element.tagName === 'INPUT' && element.getAttribute('type') !== 'hidden';\n}\nfunction getLabels(container, element, {\n  selector = '*'\n} = {}) {\n  const ariaLabelledBy = element.getAttribute('aria-labelledby');\n  const labelsId = ariaLabelledBy ? ariaLabelledBy.split(' ') : [];\n  return labelsId.length ? labelsId.map(labelId => {\n    const labellingElement = container.querySelector(`[id=\"${labelId}\"]`);\n    return labellingElement ? {\n      content: getLabelContent(labellingElement),\n      formControl: null\n    } : {\n      content: '',\n      formControl: null\n    };\n  }) : Array.from(getRealLabels(element)).map(label => {\n    const textToMatch = getLabelContent(label);\n    const formControlSelector = 'button, input, meter, output, progress, select, textarea';\n    const labelledFormControl = Array.from(label.querySelectorAll(formControlSelector)).filter(formControlElement => formControlElement.matches(selector))[0];\n    return {\n      content: textToMatch,\n      formControl: labelledFormControl\n    };\n  });\n}"],"mappings":"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","ignoreList":[]}