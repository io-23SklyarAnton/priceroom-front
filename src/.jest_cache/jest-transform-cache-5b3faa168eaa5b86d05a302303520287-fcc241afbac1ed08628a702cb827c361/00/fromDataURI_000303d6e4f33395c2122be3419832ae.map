{"version":3,"names":["Object","defineProperty","exports","value","fromDataURI","_AxiosError","_interopRequireDefault","require","_parseProtocol","_index","e","__esModule","DATA_URL_PATTERN","uri","asBlob","options","_Blob","Blob","platform","classes","protocol","parseProtocol","undefined","length","slice","match","exec","AxiosError","ERR_INVALID_URL","mime","isBase64","body","buffer","Buffer","from","decodeURIComponent","ERR_NOT_SUPPORT","type"],"sources":["fromDataURI.js"],"sourcesContent":["'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport parseProtocol from './parseProtocol.js';\nimport platform from '../platform/index.js';\n\nconst DATA_URL_PATTERN = /^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\\s\\S]*)$/;\n\n/**\n * Parse data uri to a Buffer or Blob\n *\n * @param {String} uri\n * @param {?Boolean} asBlob\n * @param {?Object} options\n * @param {?Function} options.Blob\n *\n * @returns {Buffer|Blob}\n */\nexport default function fromDataURI(uri, asBlob, options) {\n  const _Blob = options && options.Blob || platform.classes.Blob;\n  const protocol = parseProtocol(uri);\n\n  if (asBlob === undefined && _Blob) {\n    asBlob = true;\n  }\n\n  if (protocol === 'data') {\n    uri = protocol.length ? uri.slice(protocol.length + 1) : uri;\n\n    const match = DATA_URL_PATTERN.exec(uri);\n\n    if (!match) {\n      throw new AxiosError('Invalid URL', AxiosError.ERR_INVALID_URL);\n    }\n\n    const mime = match[1];\n    const isBase64 = match[2];\n    const body = match[3];\n    const buffer = Buffer.from(decodeURIComponent(body), isBase64 ? 'base64' : 'utf8');\n\n    if (asBlob) {\n      if (!_Blob) {\n        throw new AxiosError('Blob is not supported', AxiosError.ERR_NOT_SUPPORT);\n      }\n\n      return new _Blob([buffer], {type: mime});\n    }\n\n    return buffer;\n  }\n\n  throw new AxiosError('Unsupported protocol ' + protocol, AxiosError.ERR_NOT_SUPPORT);\n}\n"],"mappings":"AAAA,YAAY;;AAACA,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,cAAAE,WAAA;AAEb,IAAAC,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,cAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AAA4C,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAE5C,IAAME,gBAAgB,GAAG,+CAA+C;;AAExE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASR,WAAWA,CAACS,GAAG,EAAEC,MAAM,EAAEC,OAAO,EAAE;EACxD,IAAMC,KAAK,GAAGD,OAAO,IAAIA,OAAO,CAACE,IAAI,IAAIC,iBAAQ,CAACC,OAAO,CAACF,IAAI;EAC9D,IAAMG,QAAQ,GAAG,IAAAC,yBAAa,EAACR,GAAG,CAAC;EAEnC,IAAIC,MAAM,KAAKQ,SAAS,IAAIN,KAAK,EAAE;IACjCF,MAAM,GAAG,IAAI;EACf;EAEA,IAAIM,QAAQ,KAAK,MAAM,EAAE;IACvBP,GAAG,GAAGO,QAAQ,CAACG,MAAM,GAAGV,GAAG,CAACW,KAAK,CAACJ,QAAQ,CAACG,MAAM,GAAG,CAAC,CAAC,GAAGV,GAAG;IAE5D,IAAMY,KAAK,GAAGb,gBAAgB,CAACc,IAAI,CAACb,GAAG,CAAC;IAExC,IAAI,CAACY,KAAK,EAAE;MACV,MAAM,IAAIE,sBAAU,CAAC,aAAa,EAAEA,sBAAU,CAACC,eAAe,CAAC;IACjE;IAEA,IAAMC,IAAI,GAAGJ,KAAK,CAAC,CAAC,CAAC;IACrB,IAAMK,QAAQ,GAAGL,KAAK,CAAC,CAAC,CAAC;IACzB,IAAMM,IAAI,GAAGN,KAAK,CAAC,CAAC,CAAC;IACrB,IAAMO,MAAM,GAAGC,MAAM,CAACC,IAAI,CAACC,kBAAkB,CAACJ,IAAI,CAAC,EAAED,QAAQ,GAAG,QAAQ,GAAG,MAAM,CAAC;IAElF,IAAIhB,MAAM,EAAE;MACV,IAAI,CAACE,KAAK,EAAE;QACV,MAAM,IAAIW,sBAAU,CAAC,uBAAuB,EAAEA,sBAAU,CAACS,eAAe,CAAC;MAC3E;MAEA,OAAO,IAAIpB,KAAK,CAAC,CAACgB,MAAM,CAAC,EAAE;QAACK,IAAI,EAAER;MAAI,CAAC,CAAC;IAC1C;IAEA,OAAOG,MAAM;EACf;EAEA,MAAM,IAAIL,sBAAU,CAAC,uBAAuB,GAAGP,QAAQ,EAAEO,sBAAU,CAACS,eAAe,CAAC;AACtF","ignoreList":[]}