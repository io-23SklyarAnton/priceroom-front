fdc6e17371961f02ad37495ee8dd06cb
"use strict";

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.buildQueries = buildQueries;
exports.getElementError = getElementError;
exports.getMultipleElementsFoundError = getMultipleElementsFoundError;
exports.makeFindQuery = makeFindQuery;
exports.makeGetAllQuery = makeGetAllQuery;
exports.makeSingleQuery = makeSingleQuery;
exports.queryAllByAttribute = queryAllByAttribute;
exports.queryByAttribute = queryByAttribute;
exports.wrapSingleQueryWithSuggestion = exports.wrapAllByQueryWithSuggestion = void 0;
var _suggestions = require("./suggestions");
var _matches = require("./matches");
var _waitFor = require("./wait-for");
var _config = require("./config");
function getElementError(message, container) {
  return (0, _config.getConfig)().getElementError(message, container);
}
function getMultipleElementsFoundError(message, container) {
  return getElementError("".concat(message, "\n\n(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`))."), container);
}
function queryAllByAttribute(attribute, container, text) {
  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},
    _ref$exact = _ref.exact,
    exact = _ref$exact === void 0 ? true : _ref$exact,
    collapseWhitespace = _ref.collapseWhitespace,
    trim = _ref.trim,
    normalizer = _ref.normalizer;
  var matcher = exact ? _matches.matches : _matches.fuzzyMatches;
  var matchNormalizer = (0, _matches.makeNormalizer)({
    collapseWhitespace: collapseWhitespace,
    trim: trim,
    normalizer: normalizer
  });
  return Array.from(container.querySelectorAll("[".concat(attribute, "]"))).filter(function (node) {
    return matcher(node.getAttribute(attribute), node, text, matchNormalizer);
  });
}
function queryByAttribute(attribute, container, text, options) {
  var els = queryAllByAttribute(attribute, container, text, options);
  if (els.length > 1) {
    throw getMultipleElementsFoundError("Found multiple elements by [".concat(attribute, "=").concat(text, "]"), container);
  }
  return els[0] || null;
}

// this accepts a query function and returns a function which throws an error
// if more than one elements is returned, otherwise it returns the first
// element or null
function makeSingleQuery(allQuery, getMultipleError) {
  return function (container) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    var els = allQuery.apply(void 0, [container].concat(args));
    if (els.length > 1) {
      var elementStrings = els.map(function (element) {
        return getElementError(null, element).message;
      }).join('\n\n');
      throw getMultipleElementsFoundError("".concat(getMultipleError.apply(void 0, [container].concat(args)), "\n\nHere are the matching elements:\n\n").concat(elementStrings), container);
    }
    return els[0] || null;
  };
}
function getSuggestionError(suggestion, container) {
  return (0, _config.getConfig)().getElementError("A better query is available, try this:\n".concat(suggestion.toString(), "\n"), container);
}

// this accepts a query function and returns a function which throws an error
// if an empty list of elements is returned
function makeGetAllQuery(allQuery, getMissingError) {
  return function (container) {
    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      args[_key2 - 1] = arguments[_key2];
    }
    var els = allQuery.apply(void 0, [container].concat(args));
    if (!els.length) {
      throw (0, _config.getConfig)().getElementError(getMissingError.apply(void 0, [container].concat(args)), container);
    }
    return els;
  };
}

// this accepts a getter query function and returns a function which calls
// waitFor and passing a function which invokes the getter.
function makeFindQuery(getter) {
  return function (container, text, options, waitForOptions) {
    return (0, _waitFor.waitFor)(function () {
      return getter(container, text, options);
    }, _objectSpread({
      container: container
    }, waitForOptions));
  };
}
var wrapSingleQueryWithSuggestion = function wrapSingleQueryWithSuggestion(query, queryAllByName, variant) {
  return function (container) {
    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
      args[_key3 - 1] = arguments[_key3];
    }
    var element = query.apply(void 0, [container].concat(args));
    var _args$slice = args.slice(-1),
      _args$slice2 = _slicedToArray(_args$slice, 1),
      _args$slice2$ = _args$slice2[0],
      _args$slice2$2 = _args$slice2$ === void 0 ? {} : _args$slice2$,
      _args$slice2$2$sugges = _args$slice2$2.suggest,
      suggest = _args$slice2$2$sugges === void 0 ? (0, _config.getConfig)().throwSuggestions : _args$slice2$2$sugges;
    if (element && suggest) {
      var suggestion = (0, _suggestions.getSuggestedQuery)(element, variant);
      if (suggestion && !queryAllByName.endsWith(suggestion.queryName)) {
        throw getSuggestionError(suggestion.toString(), container);
      }
    }
    return element;
  };
};
exports.wrapSingleQueryWithSuggestion = wrapSingleQueryWithSuggestion;
var wrapAllByQueryWithSuggestion = function wrapAllByQueryWithSuggestion(query, queryAllByName, variant) {
  return function (container) {
    for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
      args[_key4 - 1] = arguments[_key4];
    }
    var els = query.apply(void 0, [container].concat(args));
    var _args$slice3 = args.slice(-1),
      _args$slice4 = _slicedToArray(_args$slice3, 1),
      _args$slice4$ = _args$slice4[0],
      _args$slice4$2 = _args$slice4$ === void 0 ? {} : _args$slice4$,
      _args$slice4$2$sugges = _args$slice4$2.suggest,
      suggest = _args$slice4$2$sugges === void 0 ? (0, _config.getConfig)().throwSuggestions : _args$slice4$2$sugges;
    if (els.length && suggest) {
      // get a unique list of all suggestion messages.  We are only going to make a suggestion if
      // all the suggestions are the same
      var uniqueSuggestionMessages = _toConsumableArray(new Set(els.map(function (element) {
        var _ref2;
        return (_ref2 = (0, _suggestions.getSuggestedQuery)(element, variant)) === null || _ref2 === void 0 ? void 0 : _ref2.toString();
      })));
      if (
      // only want to suggest if all the els have the same suggestion.
      uniqueSuggestionMessages.length === 1 && !queryAllByName.endsWith(
      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- TODO: Can this be null at runtime?
      (0, _suggestions.getSuggestedQuery)(els[0], variant).queryName)) {
        throw getSuggestionError(uniqueSuggestionMessages[0], container);
      }
    }
    return els;
  };
};

// TODO: This deviates from the published declarations
// However, the implementation always required a dyadic (after `container`) not variadic `queryAllBy` considering the implementation of `makeFindQuery`
// This is at least statically true and can be verified by accepting `QueryMethod<Arguments, HTMLElement[]>`
exports.wrapAllByQueryWithSuggestion = wrapAllByQueryWithSuggestion;
function buildQueries(queryAllBy, getMultipleError, getMissingError) {
  var queryBy = wrapSingleQueryWithSuggestion(makeSingleQuery(queryAllBy, getMultipleError), queryAllBy.name, 'query');
  var getAllBy = makeGetAllQuery(queryAllBy, getMissingError);
  var getBy = makeSingleQuery(getAllBy, getMultipleError);
  var getByWithSuggestions = wrapSingleQueryWithSuggestion(getBy, queryAllBy.name, 'get');
  var getAllWithSuggestions = wrapAllByQueryWithSuggestion(getAllBy, queryAllBy.name.replace('query', 'get'), 'getAll');
  var findAllBy = makeFindQuery(wrapAllByQueryWithSuggestion(getAllBy, queryAllBy.name, 'findAll'));
  var findBy = makeFindQuery(wrapSingleQueryWithSuggestion(getBy, queryAllBy.name, 'find'));
  return [queryBy, getAllWithSuggestions, getByWithSuggestions, findAllBy, findBy];
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdHlwZW9mIiwibyIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJyIiwiX2FycmF5V2l0aG91dEhvbGVzIiwiX2l0ZXJhYmxlVG9BcnJheSIsIl91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsIl9ub25JdGVyYWJsZVNwcmVhZCIsIlR5cGVFcnJvciIsIkFycmF5IiwiZnJvbSIsImlzQXJyYXkiLCJfYXJyYXlMaWtlVG9BcnJheSIsIl9zbGljZWRUb0FycmF5IiwiZSIsIl9hcnJheVdpdGhIb2xlcyIsIl9pdGVyYWJsZVRvQXJyYXlMaW1pdCIsIl9ub25JdGVyYWJsZVJlc3QiLCJhIiwidCIsInRvU3RyaW5nIiwiY2FsbCIsInNsaWNlIiwibmFtZSIsInRlc3QiLCJsZW5ndGgiLCJuIiwibCIsImkiLCJ1IiwiZiIsIm5leHQiLCJPYmplY3QiLCJkb25lIiwicHVzaCIsInZhbHVlIiwib3duS2V5cyIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJmaWx0ZXIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJfdG9Qcm9wZXJ0eUtleSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX3RvUHJpbWl0aXZlIiwidG9QcmltaXRpdmUiLCJTdHJpbmciLCJOdW1iZXIiLCJleHBvcnRzIiwiYnVpbGRRdWVyaWVzIiwiZ2V0RWxlbWVudEVycm9yIiwiZ2V0TXVsdGlwbGVFbGVtZW50c0ZvdW5kRXJyb3IiLCJtYWtlRmluZFF1ZXJ5IiwibWFrZUdldEFsbFF1ZXJ5IiwibWFrZVNpbmdsZVF1ZXJ5IiwicXVlcnlBbGxCeUF0dHJpYnV0ZSIsInF1ZXJ5QnlBdHRyaWJ1dGUiLCJ3cmFwU2luZ2xlUXVlcnlXaXRoU3VnZ2VzdGlvbiIsIndyYXBBbGxCeVF1ZXJ5V2l0aFN1Z2dlc3Rpb24iLCJfc3VnZ2VzdGlvbnMiLCJyZXF1aXJlIiwiX21hdGNoZXMiLCJfd2FpdEZvciIsIl9jb25maWciLCJtZXNzYWdlIiwiY29udGFpbmVyIiwiZ2V0Q29uZmlnIiwiY29uY2F0IiwiYXR0cmlidXRlIiwidGV4dCIsIl9yZWYiLCJ1bmRlZmluZWQiLCJfcmVmJGV4YWN0IiwiZXhhY3QiLCJjb2xsYXBzZVdoaXRlc3BhY2UiLCJ0cmltIiwibm9ybWFsaXplciIsIm1hdGNoZXIiLCJtYXRjaGVzIiwiZnV6enlNYXRjaGVzIiwibWF0Y2hOb3JtYWxpemVyIiwibWFrZU5vcm1hbGl6ZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwibm9kZSIsImdldEF0dHJpYnV0ZSIsIm9wdGlvbnMiLCJlbHMiLCJhbGxRdWVyeSIsImdldE11bHRpcGxlRXJyb3IiLCJfbGVuIiwiYXJncyIsIl9rZXkiLCJlbGVtZW50U3RyaW5ncyIsIm1hcCIsImVsZW1lbnQiLCJqb2luIiwiZ2V0U3VnZ2VzdGlvbkVycm9yIiwic3VnZ2VzdGlvbiIsImdldE1pc3NpbmdFcnJvciIsIl9sZW4yIiwiX2tleTIiLCJnZXR0ZXIiLCJ3YWl0Rm9yT3B0aW9ucyIsIndhaXRGb3IiLCJxdWVyeSIsInF1ZXJ5QWxsQnlOYW1lIiwidmFyaWFudCIsIl9sZW4zIiwiX2tleTMiLCJfYXJncyRzbGljZSIsIl9hcmdzJHNsaWNlMiIsIl9hcmdzJHNsaWNlMiQiLCJfYXJncyRzbGljZTIkMiIsIl9hcmdzJHNsaWNlMiQyJHN1Z2dlcyIsInN1Z2dlc3QiLCJ0aHJvd1N1Z2dlc3Rpb25zIiwiZ2V0U3VnZ2VzdGVkUXVlcnkiLCJlbmRzV2l0aCIsInF1ZXJ5TmFtZSIsIl9sZW40IiwiX2tleTQiLCJfYXJncyRzbGljZTMiLCJfYXJncyRzbGljZTQiLCJfYXJncyRzbGljZTQkIiwiX2FyZ3Mkc2xpY2U0JDIiLCJfYXJncyRzbGljZTQkMiRzdWdnZXMiLCJ1bmlxdWVTdWdnZXN0aW9uTWVzc2FnZXMiLCJTZXQiLCJfcmVmMiIsInF1ZXJ5QWxsQnkiLCJxdWVyeUJ5IiwiZ2V0QWxsQnkiLCJnZXRCeSIsImdldEJ5V2l0aFN1Z2dlc3Rpb25zIiwiZ2V0QWxsV2l0aFN1Z2dlc3Rpb25zIiwicmVwbGFjZSIsImZpbmRBbGxCeSIsImZpbmRCeSJdLCJzb3VyY2VzIjpbInF1ZXJ5LWhlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmJ1aWxkUXVlcmllcyA9IGJ1aWxkUXVlcmllcztcbmV4cG9ydHMuZ2V0RWxlbWVudEVycm9yID0gZ2V0RWxlbWVudEVycm9yO1xuZXhwb3J0cy5nZXRNdWx0aXBsZUVsZW1lbnRzRm91bmRFcnJvciA9IGdldE11bHRpcGxlRWxlbWVudHNGb3VuZEVycm9yO1xuZXhwb3J0cy5tYWtlRmluZFF1ZXJ5ID0gbWFrZUZpbmRRdWVyeTtcbmV4cG9ydHMubWFrZUdldEFsbFF1ZXJ5ID0gbWFrZUdldEFsbFF1ZXJ5O1xuZXhwb3J0cy5tYWtlU2luZ2xlUXVlcnkgPSBtYWtlU2luZ2xlUXVlcnk7XG5leHBvcnRzLnF1ZXJ5QWxsQnlBdHRyaWJ1dGUgPSBxdWVyeUFsbEJ5QXR0cmlidXRlO1xuZXhwb3J0cy5xdWVyeUJ5QXR0cmlidXRlID0gcXVlcnlCeUF0dHJpYnV0ZTtcbmV4cG9ydHMud3JhcFNpbmdsZVF1ZXJ5V2l0aFN1Z2dlc3Rpb24gPSBleHBvcnRzLndyYXBBbGxCeVF1ZXJ5V2l0aFN1Z2dlc3Rpb24gPSB2b2lkIDA7XG52YXIgX3N1Z2dlc3Rpb25zID0gcmVxdWlyZShcIi4vc3VnZ2VzdGlvbnNcIik7XG52YXIgX21hdGNoZXMgPSByZXF1aXJlKFwiLi9tYXRjaGVzXCIpO1xudmFyIF93YWl0Rm9yID0gcmVxdWlyZShcIi4vd2FpdC1mb3JcIik7XG52YXIgX2NvbmZpZyA9IHJlcXVpcmUoXCIuL2NvbmZpZ1wiKTtcbmZ1bmN0aW9uIGdldEVsZW1lbnRFcnJvcihtZXNzYWdlLCBjb250YWluZXIpIHtcbiAgcmV0dXJuICgwLCBfY29uZmlnLmdldENvbmZpZykoKS5nZXRFbGVtZW50RXJyb3IobWVzc2FnZSwgY29udGFpbmVyKTtcbn1cbmZ1bmN0aW9uIGdldE11bHRpcGxlRWxlbWVudHNGb3VuZEVycm9yKG1lc3NhZ2UsIGNvbnRhaW5lcikge1xuICByZXR1cm4gZ2V0RWxlbWVudEVycm9yKGAke21lc3NhZ2V9XFxuXFxuKElmIHRoaXMgaXMgaW50ZW50aW9uYWwsIHRoZW4gdXNlIHRoZSBcXGAqQWxsQnkqXFxgIHZhcmlhbnQgb2YgdGhlIHF1ZXJ5IChsaWtlIFxcYHF1ZXJ5QWxsQnlUZXh0XFxgLCBcXGBnZXRBbGxCeVRleHRcXGAsIG9yIFxcYGZpbmRBbGxCeVRleHRcXGApKS5gLCBjb250YWluZXIpO1xufVxuZnVuY3Rpb24gcXVlcnlBbGxCeUF0dHJpYnV0ZShhdHRyaWJ1dGUsIGNvbnRhaW5lciwgdGV4dCwge1xuICBleGFjdCA9IHRydWUsXG4gIGNvbGxhcHNlV2hpdGVzcGFjZSxcbiAgdHJpbSxcbiAgbm9ybWFsaXplclxufSA9IHt9KSB7XG4gIGNvbnN0IG1hdGNoZXIgPSBleGFjdCA/IF9tYXRjaGVzLm1hdGNoZXMgOiBfbWF0Y2hlcy5mdXp6eU1hdGNoZXM7XG4gIGNvbnN0IG1hdGNoTm9ybWFsaXplciA9ICgwLCBfbWF0Y2hlcy5tYWtlTm9ybWFsaXplcikoe1xuICAgIGNvbGxhcHNlV2hpdGVzcGFjZSxcbiAgICB0cmltLFxuICAgIG5vcm1hbGl6ZXJcbiAgfSk7XG4gIHJldHVybiBBcnJheS5mcm9tKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKGBbJHthdHRyaWJ1dGV9XWApKS5maWx0ZXIobm9kZSA9PiBtYXRjaGVyKG5vZGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSksIG5vZGUsIHRleHQsIG1hdGNoTm9ybWFsaXplcikpO1xufVxuZnVuY3Rpb24gcXVlcnlCeUF0dHJpYnV0ZShhdHRyaWJ1dGUsIGNvbnRhaW5lciwgdGV4dCwgb3B0aW9ucykge1xuICBjb25zdCBlbHMgPSBxdWVyeUFsbEJ5QXR0cmlidXRlKGF0dHJpYnV0ZSwgY29udGFpbmVyLCB0ZXh0LCBvcHRpb25zKTtcbiAgaWYgKGVscy5sZW5ndGggPiAxKSB7XG4gICAgdGhyb3cgZ2V0TXVsdGlwbGVFbGVtZW50c0ZvdW5kRXJyb3IoYEZvdW5kIG11bHRpcGxlIGVsZW1lbnRzIGJ5IFske2F0dHJpYnV0ZX09JHt0ZXh0fV1gLCBjb250YWluZXIpO1xuICB9XG4gIHJldHVybiBlbHNbMF0gfHwgbnVsbDtcbn1cblxuLy8gdGhpcyBhY2NlcHRzIGEgcXVlcnkgZnVuY3Rpb24gYW5kIHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCB0aHJvd3MgYW4gZXJyb3Jcbi8vIGlmIG1vcmUgdGhhbiBvbmUgZWxlbWVudHMgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBpdCByZXR1cm5zIHRoZSBmaXJzdFxuLy8gZWxlbWVudCBvciBudWxsXG5mdW5jdGlvbiBtYWtlU2luZ2xlUXVlcnkoYWxsUXVlcnksIGdldE11bHRpcGxlRXJyb3IpIHtcbiAgcmV0dXJuIChjb250YWluZXIsIC4uLmFyZ3MpID0+IHtcbiAgICBjb25zdCBlbHMgPSBhbGxRdWVyeShjb250YWluZXIsIC4uLmFyZ3MpO1xuICAgIGlmIChlbHMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgZWxlbWVudFN0cmluZ3MgPSBlbHMubWFwKGVsZW1lbnQgPT4gZ2V0RWxlbWVudEVycm9yKG51bGwsIGVsZW1lbnQpLm1lc3NhZ2UpLmpvaW4oJ1xcblxcbicpO1xuICAgICAgdGhyb3cgZ2V0TXVsdGlwbGVFbGVtZW50c0ZvdW5kRXJyb3IoYCR7Z2V0TXVsdGlwbGVFcnJvcihjb250YWluZXIsIC4uLmFyZ3MpfVxuXG5IZXJlIGFyZSB0aGUgbWF0Y2hpbmcgZWxlbWVudHM6XG5cbiR7ZWxlbWVudFN0cmluZ3N9YCwgY29udGFpbmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGVsc1swXSB8fCBudWxsO1xuICB9O1xufVxuZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbkVycm9yKHN1Z2dlc3Rpb24sIGNvbnRhaW5lcikge1xuICByZXR1cm4gKDAsIF9jb25maWcuZ2V0Q29uZmlnKSgpLmdldEVsZW1lbnRFcnJvcihgQSBiZXR0ZXIgcXVlcnkgaXMgYXZhaWxhYmxlLCB0cnkgdGhpczpcbiR7c3VnZ2VzdGlvbi50b1N0cmluZygpfVxuYCwgY29udGFpbmVyKTtcbn1cblxuLy8gdGhpcyBhY2NlcHRzIGEgcXVlcnkgZnVuY3Rpb24gYW5kIHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCB0aHJvd3MgYW4gZXJyb3Jcbi8vIGlmIGFuIGVtcHR5IGxpc3Qgb2YgZWxlbWVudHMgaXMgcmV0dXJuZWRcbmZ1bmN0aW9uIG1ha2VHZXRBbGxRdWVyeShhbGxRdWVyeSwgZ2V0TWlzc2luZ0Vycm9yKSB7XG4gIHJldHVybiAoY29udGFpbmVyLCAuLi5hcmdzKSA9PiB7XG4gICAgY29uc3QgZWxzID0gYWxsUXVlcnkoY29udGFpbmVyLCAuLi5hcmdzKTtcbiAgICBpZiAoIWVscy5sZW5ndGgpIHtcbiAgICAgIHRocm93ICgwLCBfY29uZmlnLmdldENvbmZpZykoKS5nZXRFbGVtZW50RXJyb3IoZ2V0TWlzc2luZ0Vycm9yKGNvbnRhaW5lciwgLi4uYXJncyksIGNvbnRhaW5lcik7XG4gICAgfVxuICAgIHJldHVybiBlbHM7XG4gIH07XG59XG5cbi8vIHRoaXMgYWNjZXB0cyBhIGdldHRlciBxdWVyeSBmdW5jdGlvbiBhbmQgcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIGNhbGxzXG4vLyB3YWl0Rm9yIGFuZCBwYXNzaW5nIGEgZnVuY3Rpb24gd2hpY2ggaW52b2tlcyB0aGUgZ2V0dGVyLlxuZnVuY3Rpb24gbWFrZUZpbmRRdWVyeShnZXR0ZXIpIHtcbiAgcmV0dXJuIChjb250YWluZXIsIHRleHQsIG9wdGlvbnMsIHdhaXRGb3JPcHRpb25zKSA9PiB7XG4gICAgcmV0dXJuICgwLCBfd2FpdEZvci53YWl0Rm9yKSgoKSA9PiB7XG4gICAgICByZXR1cm4gZ2V0dGVyKGNvbnRhaW5lciwgdGV4dCwgb3B0aW9ucyk7XG4gICAgfSwge1xuICAgICAgY29udGFpbmVyLFxuICAgICAgLi4ud2FpdEZvck9wdGlvbnNcbiAgICB9KTtcbiAgfTtcbn1cbmNvbnN0IHdyYXBTaW5nbGVRdWVyeVdpdGhTdWdnZXN0aW9uID0gKHF1ZXJ5LCBxdWVyeUFsbEJ5TmFtZSwgdmFyaWFudCkgPT4gKGNvbnRhaW5lciwgLi4uYXJncykgPT4ge1xuICBjb25zdCBlbGVtZW50ID0gcXVlcnkoY29udGFpbmVyLCAuLi5hcmdzKTtcbiAgY29uc3QgW3tcbiAgICBzdWdnZXN0ID0gKDAsIF9jb25maWcuZ2V0Q29uZmlnKSgpLnRocm93U3VnZ2VzdGlvbnNcbiAgfSA9IHt9XSA9IGFyZ3Muc2xpY2UoLTEpO1xuICBpZiAoZWxlbWVudCAmJiBzdWdnZXN0KSB7XG4gICAgY29uc3Qgc3VnZ2VzdGlvbiA9ICgwLCBfc3VnZ2VzdGlvbnMuZ2V0U3VnZ2VzdGVkUXVlcnkpKGVsZW1lbnQsIHZhcmlhbnQpO1xuICAgIGlmIChzdWdnZXN0aW9uICYmICFxdWVyeUFsbEJ5TmFtZS5lbmRzV2l0aChzdWdnZXN0aW9uLnF1ZXJ5TmFtZSkpIHtcbiAgICAgIHRocm93IGdldFN1Z2dlc3Rpb25FcnJvcihzdWdnZXN0aW9uLnRvU3RyaW5nKCksIGNvbnRhaW5lcik7XG4gICAgfVxuICB9XG4gIHJldHVybiBlbGVtZW50O1xufTtcbmV4cG9ydHMud3JhcFNpbmdsZVF1ZXJ5V2l0aFN1Z2dlc3Rpb24gPSB3cmFwU2luZ2xlUXVlcnlXaXRoU3VnZ2VzdGlvbjtcbmNvbnN0IHdyYXBBbGxCeVF1ZXJ5V2l0aFN1Z2dlc3Rpb24gPSAocXVlcnksIHF1ZXJ5QWxsQnlOYW1lLCB2YXJpYW50KSA9PiAoY29udGFpbmVyLCAuLi5hcmdzKSA9PiB7XG4gIGNvbnN0IGVscyA9IHF1ZXJ5KGNvbnRhaW5lciwgLi4uYXJncyk7XG4gIGNvbnN0IFt7XG4gICAgc3VnZ2VzdCA9ICgwLCBfY29uZmlnLmdldENvbmZpZykoKS50aHJvd1N1Z2dlc3Rpb25zXG4gIH0gPSB7fV0gPSBhcmdzLnNsaWNlKC0xKTtcbiAgaWYgKGVscy5sZW5ndGggJiYgc3VnZ2VzdCkge1xuICAgIC8vIGdldCBhIHVuaXF1ZSBsaXN0IG9mIGFsbCBzdWdnZXN0aW9uIG1lc3NhZ2VzLiAgV2UgYXJlIG9ubHkgZ29pbmcgdG8gbWFrZSBhIHN1Z2dlc3Rpb24gaWZcbiAgICAvLyBhbGwgdGhlIHN1Z2dlc3Rpb25zIGFyZSB0aGUgc2FtZVxuICAgIGNvbnN0IHVuaXF1ZVN1Z2dlc3Rpb25NZXNzYWdlcyA9IFsuLi5uZXcgU2V0KGVscy5tYXAoZWxlbWVudCA9PiAoMCwgX3N1Z2dlc3Rpb25zLmdldFN1Z2dlc3RlZFF1ZXJ5KShlbGVtZW50LCB2YXJpYW50KT8udG9TdHJpbmcoKSkpXTtcbiAgICBpZiAoXG4gICAgLy8gb25seSB3YW50IHRvIHN1Z2dlc3QgaWYgYWxsIHRoZSBlbHMgaGF2ZSB0aGUgc2FtZSBzdWdnZXN0aW9uLlxuICAgIHVuaXF1ZVN1Z2dlc3Rpb25NZXNzYWdlcy5sZW5ndGggPT09IDEgJiYgIXF1ZXJ5QWxsQnlOYW1lLmVuZHNXaXRoKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uIC0tIFRPRE86IENhbiB0aGlzIGJlIG51bGwgYXQgcnVudGltZT9cbiAgICAoMCwgX3N1Z2dlc3Rpb25zLmdldFN1Z2dlc3RlZFF1ZXJ5KShlbHNbMF0sIHZhcmlhbnQpLnF1ZXJ5TmFtZSkpIHtcbiAgICAgIHRocm93IGdldFN1Z2dlc3Rpb25FcnJvcih1bmlxdWVTdWdnZXN0aW9uTWVzc2FnZXNbMF0sIGNvbnRhaW5lcik7XG4gICAgfVxuICB9XG4gIHJldHVybiBlbHM7XG59O1xuXG4vLyBUT0RPOiBUaGlzIGRldmlhdGVzIGZyb20gdGhlIHB1Ymxpc2hlZCBkZWNsYXJhdGlvbnNcbi8vIEhvd2V2ZXIsIHRoZSBpbXBsZW1lbnRhdGlvbiBhbHdheXMgcmVxdWlyZWQgYSBkeWFkaWMgKGFmdGVyIGBjb250YWluZXJgKSBub3QgdmFyaWFkaWMgYHF1ZXJ5QWxsQnlgIGNvbnNpZGVyaW5nIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBgbWFrZUZpbmRRdWVyeWBcbi8vIFRoaXMgaXMgYXQgbGVhc3Qgc3RhdGljYWxseSB0cnVlIGFuZCBjYW4gYmUgdmVyaWZpZWQgYnkgYWNjZXB0aW5nIGBRdWVyeU1ldGhvZDxBcmd1bWVudHMsIEhUTUxFbGVtZW50W10+YFxuZXhwb3J0cy53cmFwQWxsQnlRdWVyeVdpdGhTdWdnZXN0aW9uID0gd3JhcEFsbEJ5UXVlcnlXaXRoU3VnZ2VzdGlvbjtcbmZ1bmN0aW9uIGJ1aWxkUXVlcmllcyhxdWVyeUFsbEJ5LCBnZXRNdWx0aXBsZUVycm9yLCBnZXRNaXNzaW5nRXJyb3IpIHtcbiAgY29uc3QgcXVlcnlCeSA9IHdyYXBTaW5nbGVRdWVyeVdpdGhTdWdnZXN0aW9uKG1ha2VTaW5nbGVRdWVyeShxdWVyeUFsbEJ5LCBnZXRNdWx0aXBsZUVycm9yKSwgcXVlcnlBbGxCeS5uYW1lLCAncXVlcnknKTtcbiAgY29uc3QgZ2V0QWxsQnkgPSBtYWtlR2V0QWxsUXVlcnkocXVlcnlBbGxCeSwgZ2V0TWlzc2luZ0Vycm9yKTtcbiAgY29uc3QgZ2V0QnkgPSBtYWtlU2luZ2xlUXVlcnkoZ2V0QWxsQnksIGdldE11bHRpcGxlRXJyb3IpO1xuICBjb25zdCBnZXRCeVdpdGhTdWdnZXN0aW9ucyA9IHdyYXBTaW5nbGVRdWVyeVdpdGhTdWdnZXN0aW9uKGdldEJ5LCBxdWVyeUFsbEJ5Lm5hbWUsICdnZXQnKTtcbiAgY29uc3QgZ2V0QWxsV2l0aFN1Z2dlc3Rpb25zID0gd3JhcEFsbEJ5UXVlcnlXaXRoU3VnZ2VzdGlvbihnZXRBbGxCeSwgcXVlcnlBbGxCeS5uYW1lLnJlcGxhY2UoJ3F1ZXJ5JywgJ2dldCcpLCAnZ2V0QWxsJyk7XG4gIGNvbnN0IGZpbmRBbGxCeSA9IG1ha2VGaW5kUXVlcnkod3JhcEFsbEJ5UXVlcnlXaXRoU3VnZ2VzdGlvbihnZXRBbGxCeSwgcXVlcnlBbGxCeS5uYW1lLCAnZmluZEFsbCcpKTtcbiAgY29uc3QgZmluZEJ5ID0gbWFrZUZpbmRRdWVyeSh3cmFwU2luZ2xlUXVlcnlXaXRoU3VnZ2VzdGlvbihnZXRCeSwgcXVlcnlBbGxCeS5uYW1lLCAnZmluZCcpKTtcbiAgcmV0dXJuIFtxdWVyeUJ5LCBnZXRBbGxXaXRoU3VnZ2VzdGlvbnMsIGdldEJ5V2l0aFN1Z2dlc3Rpb25zLCBmaW5kQWxsQnksIGZpbmRCeV07XG59Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUFDLFNBQUFBLFFBQUFDLENBQUEsc0NBQUFELE9BQUEsd0JBQUFFLE1BQUEsdUJBQUFBLE1BQUEsQ0FBQUMsUUFBQSxhQUFBRixDQUFBLGtCQUFBQSxDQUFBLGdCQUFBQSxDQUFBLFdBQUFBLENBQUEseUJBQUFDLE1BQUEsSUFBQUQsQ0FBQSxDQUFBRyxXQUFBLEtBQUFGLE1BQUEsSUFBQUQsQ0FBQSxLQUFBQyxNQUFBLENBQUFHLFNBQUEscUJBQUFKLENBQUEsS0FBQUQsT0FBQSxDQUFBQyxDQUFBO0FBQUEsU0FBQUssbUJBQUFDLENBQUEsV0FBQUMsa0JBQUEsQ0FBQUQsQ0FBQSxLQUFBRSxnQkFBQSxDQUFBRixDQUFBLEtBQUFHLDJCQUFBLENBQUFILENBQUEsS0FBQUksa0JBQUE7QUFBQSxTQUFBQSxtQkFBQSxjQUFBQyxTQUFBO0FBQUEsU0FBQUgsaUJBQUFGLENBQUEsOEJBQUFMLE1BQUEsWUFBQUssQ0FBQSxDQUFBTCxNQUFBLENBQUFDLFFBQUEsYUFBQUksQ0FBQSx1QkFBQU0sS0FBQSxDQUFBQyxJQUFBLENBQUFQLENBQUE7QUFBQSxTQUFBQyxtQkFBQUQsQ0FBQSxRQUFBTSxLQUFBLENBQUFFLE9BQUEsQ0FBQVIsQ0FBQSxVQUFBUyxpQkFBQSxDQUFBVCxDQUFBO0FBQUEsU0FBQVUsZUFBQVYsQ0FBQSxFQUFBVyxDQUFBLFdB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